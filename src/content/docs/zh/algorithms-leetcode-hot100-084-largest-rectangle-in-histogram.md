---
title: "084-æŸ±çŠ¶å›¾ä¸­æœ€å¤§çš„çŸ©å½¢"
order: 5
section: "ç®—æ³•"
topic: "LeetCode hot100"
lang: "zh"
summary: "ä½¿ç”¨å•è°ƒé€’å¢æ ˆï¼ˆå­˜ä¸‹æ ‡ï¼‰é…åˆå“¨å…µæŠ€å·§ï¼Œåœ¨ä¸€æ¬¡éå†ä¸­æ‰¾å‡ºä»¥æ¯ä¸ªæŸ±å­ä¸ºæœ€çŸ®é«˜åº¦æ—¶çš„æœ€å¤§çŸ©å½¢é¢ç§¯ã€‚"
icon: "ğŸ“Š"
featured: false
toc: true
updated: 2026-01-29
---

> ç»™å®š *n* ä¸ªéè´Ÿæ•´æ•°ï¼Œç”¨æ¥è¡¨ç¤ºæŸ±çŠ¶å›¾ä¸­å„ä¸ªæŸ±å­çš„é«˜åº¦ã€‚æ¯ä¸ªæŸ±å­å½¼æ­¤ç›¸é‚»ï¼Œä¸”å®½åº¦ä¸º 1 ã€‚
>
> æ±‚åœ¨è¯¥æŸ±çŠ¶å›¾ä¸­ï¼Œèƒ½å¤Ÿå‹¾å‹’å‡ºæ¥çš„çŸ©å½¢çš„æœ€å¤§é¢ç§¯ã€‚

![ç¤ºä¾‹å›¾ç‰‡](https://assets.leetcode.com/uploads/2021/01/04/histogram.jpg)

## æ€è·¯ï¼šå•è°ƒé€’å¢æ ˆ + å“¨å…µæŠ€å·§

- æ ¸å¿ƒæ€æƒ³ï¼šå¯¹äºæ¯ä¸ªæŸ±å­ï¼Œæ‰¾å‡ºä»¥å®ƒä¸º**æœ€çŸ®é«˜åº¦**æ—¶èƒ½å½¢æˆçš„æœ€å¤§çŸ©å½¢ã€‚
- ç”¨å•è°ƒé€’å¢æ ˆï¼ˆå­˜ä¸‹æ ‡ï¼‰ç»´æŠ¤"è¿˜æ²¡æ‰¾åˆ°å³è¾¹ç•Œ"çš„æŸ±å­ã€‚
- å½“é‡åˆ°æ›´çŸ®çš„æŸ±å­æ—¶ï¼Œè¯´æ˜æ ˆé¡¶æŸ±å­çš„å³è¾¹ç•Œç¡®å®šäº†ï¼Œå¯ä»¥ç»“ç®—é¢ç§¯ã€‚
- åœ¨æ•°ç»„æœ«å°¾æ·»åŠ é«˜åº¦ä¸º 0 çš„å“¨å…µï¼Œç¡®ä¿æ‰€æœ‰æŸ±å­éƒ½èƒ½è¢«ç»“ç®—ã€‚

æ—¶é—´å¤æ‚åº¦ \(O(n)\)ï¼Œæ¯ä¸ªä¸‹æ ‡æœ€å¤šå…¥æ ˆã€å‡ºæ ˆå„ä¸€æ¬¡ã€‚

## ä»£ç å®ç°

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        int len = heights.length;

        // æ–°æ•°ç»„ï¼šæœ«å°¾åŠ ä¸€ä¸ªé«˜åº¦ä¸º 0 çš„å“¨å…µï¼Œç”¨æ¥è§¦å‘æœ€ç»ˆæ¸…ç®—
        int[] newArray = new int[len + 1];
        System.arraycopy(heights, 0, newArray, 0, len);
        newArray[len] = 0;

        int ans = 0;
        // å•è°ƒé€’å¢æ ˆï¼šå­˜ä¸‹æ ‡ï¼Œä¿è¯ newArray[æ ˆåº•..æ ˆé¡¶] é€’å¢
        Deque<Integer> stack = new ArrayDeque<>();

        for (int i = 0; i <= len; i++) {
            int cur = newArray[i];

            // cur æ›´çŸ®ï¼šè¯´æ˜ cur æ˜¯"æ ˆé¡¶æŸ±å­"å³ä¾§ç¬¬ä¸€ä¸ªæ›´çŸ®æŸ±å­ï¼Œæ ˆé¡¶æŸ±å­çš„å³è¾¹ç•Œç¡®å®šï¼Œå¯ç»“ç®—é¢ç§¯
            while (!stack.isEmpty() && newArray[stack.peek()] > cur) {
                int mid = stack.pop();
                int height = newArray[mid]; // ä»¥ mid ä¸ºæœ€çŸ®é«˜åº¦

                // leftLessï¼šmid å·¦ä¾§ç¬¬ä¸€ä¸ªæ›´çŸ®æŸ±å­çš„ä¸‹æ ‡ï¼›è‹¥ä¸å­˜åœ¨ï¼Œç”¨ -1 è¡¨ç¤ºè¾¹ç•Œå¤–
                int leftLess = stack.isEmpty() ? -1 : stack.peek();

                // å®½åº¦ = å³è¾¹ç•Œ(i-1) - å·¦è¾¹ç•Œ(leftLess+1) + 1 = i - leftLess - 1
                int width = i - leftLess - 1;

                ans = Math.max(ans, height * width);
            }

            // å…¥æ ˆï¼Œç»´æŒå•è°ƒé€’å¢ï¼ˆç­‰å¾…å°†æ¥é‡åˆ°æ›´çŸ®æŸ±å­æ—¶ç»“ç®—ï¼‰
            stack.push(i);
        }

        return ans;
    }
}
```

## æ•°ç»„å¤åˆ¶æ–¹æ³•

### `System.arraycopy`ï¼ˆæœ€å¸¸ç”¨ã€æœ€å¿«ã€åº•å±‚ä¼˜åŒ–ï¼‰

é€‚åˆï¼šæŠŠä¸€ä¸ªæ•°ç»„çš„ä¸€æ®µå¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°ç»„ï¼ˆåŒ…æ‹¬æ‰©å®¹åå¤åˆ¶ï¼‰

```java
int n = heights.length;
int[] a = new int[n + 1];
System.arraycopy(heights, 0, a, 0, n);
a[n] = 0; // å“¨å…µ
```

- å¤åˆ¶çš„æ˜¯**å…ƒç´ å¼•ç”¨/å€¼**ï¼ˆint æ˜¯å€¼ï¼‰
- å¯¹å¯¹è±¡æ•°ç»„æ˜¯**æµ…æ‹·è´**ï¼ˆåªæ‹·å¼•ç”¨ï¼‰

### `Arrays.copyOf`ï¼ˆæœ€é€‚åˆ"æ‰©å®¹å¤åˆ¶"ï¼‰

é€‚åˆï¼šåˆ·é¢˜é‡Œæœ€å¸¸è§çš„"å¤åˆ¶å¹¶æ‰©åˆ°æ–°é•¿åº¦"

```java
import java.util.Arrays;

int[] a = Arrays.copyOf(heights, heights.length + 1);
a[heights.length] = 0;
```

- ç®€æ´ã€è¯­ä¹‰æ¸…æ™°
- å†…éƒ¨ä¹Ÿä¼šç”¨é«˜æ•ˆå¤åˆ¶
