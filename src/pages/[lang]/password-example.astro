---
/**
 * 密码保护页面示例
 * 演示如何使用 PasswordGate 组件保护页面
 */
import BaseLayout from '../../layouts/BaseLayout.astro';
import PasswordGate from '../../components/PasswordGate.astro';
import type { Lang } from '../../i18n/config';
import { SUPPORTED_LANGS } from '../../i18n/config';

export function getStaticPaths() {
	return SUPPORTED_LANGS.map((lang) => ({ params: { lang } }));
}

const { lang } = Astro.params as { lang: Lang };

// 这里设置密码（实际使用时应该从环境变量或配置文件中读取）
// 建议使用环境变量：import.meta.env.PAGE_PASSWORD
const PAGE_PASSWORD = 'your_password_here'; // 替换为实际密码

const pageTitle = lang === 'zh' ? '密码保护示例' : 'Password Protected Example';
const pageDesc = lang === 'zh' 
	? '这是一个密码保护页面的示例' 
	: 'This is an example of a password protected page';
---

<BaseLayout
	lang={lang}
	title={`${pageTitle} · 布吉岛`}
	description={pageDesc}
	currentPath={`/${lang}/password-example/`}
>
	<PasswordGate
		password={PAGE_PASSWORD}
		lang={lang}
		storageKey="example_page_password"
		expiresIn={0}
		useSessionStorage={false}
		hint={lang === 'zh' ? '关注公众号获取密码' : 'Follow our WeChat account to get the password'}
	>
		<section class="section">
			<h1>{pageTitle}</h1>
			<p>
				{lang === 'zh' 
					? '恭喜！您已成功通过密码验证，现在可以查看此页面的内容了。' 
					: 'Congratulations! You have successfully verified the password and can now view this page content.'}
			</p>
			<div class="content">
				{lang === 'zh' ? (
					<>
						<h2>受保护的内容</h2>
						<p>这里是需要密码才能访问的内容。</p>
						<p>您可以使用 <code>PasswordGate</code> 组件来保护任何页面。</p>
					</>
				) : (
					<>
						<h2>Protected Content</h2>
						<p>This is the content that requires a password to access.</p>
						<p>You can use the <code>PasswordGate</code> component to protect any page.</p>
					</>
				)}
			</div>
		</section>
	</PasswordGate>
</BaseLayout>
